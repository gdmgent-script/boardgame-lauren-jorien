<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Truth Seekers - CTRL+P</title>
    <link rel="stylesheet" href="updated_styles.css">

    <!-- A-Frame and AR.js -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js@1.7.2/aframe/build/aframe-ar.min.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <style>
        /* Extra styles voor AR view */
        #arViewContainer {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9999;
        }
        #closeScanner {
            position: absolute;
            top: 10px; right: 10px;
            padding: 10px;
            background: red;
            color: white;
            border: none;
            cursor: pointer;
            z-index: 10000;
        }
    </style>
</head>

<body>
<div class="container">

    <!-- Start Screen -->
    <div id="startScreen" class="screen active">
        <div class="logo-container">
            <img src="logo.png" alt="Truth Seekers Logo" class="logo">
        </div>
        <h1>CTRL+P</h1>
        <p>Ontmasker de Fakemaker!</p>
        <div class="button-container">
            <button id="hostGameBtn" class="primary-button">Spel Hosten</button>
            <button id="goToJoinBtn" class="secondary-button">Deelnemen</button>
        </div>
    </div>

    <!-- (alle andere schermen blijven identiek) -->

    <!-- Game Screen (met AR button) -->
    <div id="gameScreen" class="screen">
        <div class="game-header">
            <div class="player-info">
                <p>Huidige Speler: <span id="currentPlayerDisplay" class="highlight"></span></p>
            </div>
            <div id="answerInfo" class="answer-info hidden">
                <p>Juiste Antwoord: <span id="correctAnswer" class="highlight"></span></p>
            </div>
        </div>

        <div id="yourTurnInfo" class="your-turn-info">
            <p>Het is jouw beurt!</p>
            <div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
                <button id="showQuestionBtn" class="primary-button">Toon Vraag</button>
                <button id="scanHiroGameBtn" class="secondary-button">Scan Hiro</button>
            </div>
        </div>

        <div id="notYourTurnInfo" class="not-your-turn-info hidden">
            <p>Wacht op je beurt...</p>
            <p>Huidige speler: <span id="currentPlayerName" class="highlight"></span></p>
        </div>

        <div class="connection-status">
            <span id="connectionIndicator" class="connection-indicator"></span>
            <span id="connectionStatus">Verbonden</span>
        </div>
    </div>

    <!-- AR Container -->
    <div id="arViewContainer" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; background: rgba(0,0,0,0.8);">
    <button id="closeScanner" style="position: absolute; top: 10px; right: 10px; z-index: 10000; background: red; color: white; padding: 10px; border: none;">Sluiten</button>

    <a-scene
        embedded
        arjs="sourceType: webcam;"
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true;"
        id="arScene"
    >
        <a-marker preset="hiro">
            <a-box position="0 0.5 0" material="color: blue;"></a-box>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>
    </div>


    <!-- Globale AR-knop indien nodig -->
    <button id="globalScanHiroBtn" class="global-ar-button hidden">scan Hiro</button>

</div>

<!-- Scripts -->
<script src="complete_fixed_script.js"></script>

<script>
    function openARScanner() {
        const container = document.getElementById('arViewContainer');
        const sceneContainer = document.getElementById('arSceneContainer');

        // Leegmaken voor hergebruik
        sceneContainer.innerHTML = '';

        const scene = document.createElement('a-scene');
        scene.setAttribute('embedded', '');
        scene.setAttribute('arjs', '');

        const marker = document.createElement('a-marker');
        marker.setAttribute('preset', 'hiro');

        const box = document.createElement('a-box');
        box.setAttribute('position', '0 0.5 0');
        box.setAttribute('material', 'color: blue');

        marker.appendChild(box);
        scene.appendChild(marker);

        const camera = document.createElement('a-entity');
        camera.setAttribute('camera', '');
        scene.appendChild(camera);

        sceneContainer.appendChild(scene);

        container.style.display = 'block';
    }

    function closeARScanner() {
        document.getElementById('arViewContainer').style.display = 'none';
        document.getElementById('arSceneContainer').innerHTML = '';
    }

    document.getElementById('scanHiroGameBtn')?.addEventListener('click', openARScanner);
    document.getElementById('globalScanHiroBtn')?.addEventListener('click', openARScanner);
    document.getElementById('closeScanner')?.addEventListener('click', closeARScanner);
</script>
</body>
</html>
